# 使用說明

## 資料保存功能

### 問題解決
您之前遇到的問題「編輯完後重新整理資料就沒有更新了」已經完全解決！

### 新的保存機制
現在當您編輯模板時：
1. **編輯模板** → 點擊編輯按鈕
2. **修改內容** → 在彈出的編輯視窗中修改
3. **點擊保存** → 資料會真正保存到伺服器
4. **重新整理** → 資料不會消失，會保持更新

### 使用步驟

#### 1. 編輯現有模板
1. 在模板列表中點擊「編輯」按鈕
2. 在彈出的編輯視窗中修改內容
3. 點擊「保存模板」按鈕
4. 系統會顯示「模板已成功保存」
5. 重新整理頁面，資料仍然存在

#### 2. 新增模板
1. 點擊「新增模板」按鈕
2. 填寫模板資訊（代碼、分類、標題、內容等）
3. 點擊「儲存模板」按鈕
4. 新模板會立即出現在列表中

#### 3. 重新載入資料
- 點擊「重新載入」按鈕可以手動刷新資料
- 系統會從伺服器重新載入最新的模板資料

### 功能特色

#### ✅ 真正的持久化保存
- 編輯後的資料會保存到伺服器檔案
- 重新整理頁面不會丟失資料
- 支援多用戶同時編輯

#### ✅ 自動備份機制
- 每次保存都會自動創建備份檔案
- 資料安全有保障
- 可以從備份恢復資料

#### ✅ 操作日誌記錄
- 所有編輯操作都會記錄在日誌中
- 可以追蹤誰在什麼時候修改了什麼
- 便於問題排查和審計

#### ✅ 錯誤處理和回饋
- 保存失敗時會顯示具體錯誤訊息
- 網路問題時會自動重試
- 用戶體驗更加友好

### 技術細節

#### 資料流程
```
編輯 → 前端驗證 → API 請求 → 後端處理 → 檔案保存 → 備份創建 → 日誌記錄 → 前端更新
```

#### 備用機制
- 如果 API 無法訪問，系統會自動使用靜態檔案
- 確保在任何情況下都能正常使用
- 資料不會丟失

#### 安全措施
- 所有輸入都會進行驗證
- 防止重複代碼和無效資料
- 檔案權限控制

### 常見問題

#### Q: 保存時顯示錯誤怎麼辦？
A: 請檢查：
1. 是否填寫了所有必填欄位
2. 模板代碼是否重複
3. 網路連接是否正常
4. 如果問題持續，請聯繫管理員

#### Q: 可以同時編輯多個模板嗎？
A: 可以，系統支援並發編輯，但建議一次編輯一個模板以避免衝突。

#### Q: 如何恢復誤刪的資料？
A: 系統會自動創建備份檔案，管理員可以從備份中恢復資料。

#### Q: 編輯歷史記錄在哪裡？
A: 所有操作都會記錄在 `data/logs/template-updates.log` 檔案中。

### 測試功能

您可以使用 API 測試頁面來驗證功能是否正常：
- 訪問 `/api/test.html` 進行 API 測試
- 測試獲取模板功能
- 測試保存模板功能
- 測試錯誤處理機制

### 聯繫支援

如果您在使用過程中遇到任何問題：
1. 查看瀏覽器控制台的錯誤訊息
2. 檢查網路連接
3. 嘗試重新載入頁面
4. 聯繫技術支援

---

**注意**: 現在您可以放心地編輯模板，資料會真正保存，不會再出現重新整理後消失的問題！ 